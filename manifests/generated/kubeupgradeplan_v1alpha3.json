{
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "properties": {
        "allowDowngrade": {
          "default": false,
          "description": "Allow downgrading to older kubernetes versions.\nOnly enable if you know what you are doing.",
          "type": "boolean"
        },
        "groups": {
          "additionalProperties": {
            "properties": {
              "dependsOn": {
                "description": "Specify group(s) that should be upgraded first.\nShould be used to ensure control-plane nodes are upgraded first.",
                "example": "control-plane",
                "items": {
                  "type": "string"
                },
                "type": "array",
                "x-kubernetes-list-type": "atomic"
              },
              "labels": {
                "additionalProperties": {
                  "type": "string"
                },
                "description": "The labels by which to filter nodes for this group",
                "example": "node-role.kubernetes.io/control-plane;node-role.kubernetes.io/compute",
                "type": "object"
              },
              "tolerations": {
                "description": "Enable the upgraded pods to be scheduled on tainted nodes like control-planes.",
                "items": {
                  "description": "The pod this Toleration is attached to tolerates any taint that matches\nthe triple <key,value,effect> using the matching operator <operator>.",
                  "properties": {
                    "effect": {
                      "description": "Effect indicates the taint effect to match. Empty means match all taint effects.\nWhen specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.",
                      "type": "string"
                    },
                    "key": {
                      "description": "Key is the taint key that the toleration applies to. Empty means match all taint keys.\nIf the key is empty, operator must be Exists; this combination means to match all values and all keys.",
                      "type": "string"
                    },
                    "operator": {
                      "description": "Operator represents a key's relationship to the value.\nValid operators are Exists, Equal, Lt, and Gt. Defaults to Equal.\nExists is equivalent to wildcard for value, so that a pod can\ntolerate all taints of a particular category.\nLt and Gt perform numeric comparisons (requires feature gate TaintTolerationComparisonOperators).",
                      "type": "string"
                    },
                    "tolerationSeconds": {
                      "description": "TolerationSeconds represents the period of time the toleration (which must be\nof effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,\nit is not set, which means tolerate the taint forever (do not evict). Zero and\nnegative values will be treated as 0 (evict immediately) by the system.",
                      "format": "int64",
                      "type": "integer"
                    },
                    "value": {
                      "description": "Value is the taint value the toleration matches to.\nIf the operator is Exists, the value should be empty, otherwise just a regular string.",
                      "type": "string"
                    }
                  },
                  "type": "object",
                  "additionalProperties": false
                },
                "type": "array",
                "x-kubernetes-list-type": "atomic"
              },
              "upgraded": {
                "description": "The configuration for all upgraded daemons in the group. Overwrites global parameters.",
                "nullable": true,
                "properties": {
                  "allowUnsignedOstreeImages": {
                    "description": "Allow unsigned ostree images for rebase. It is recommended to use signed images instead.",
                    "type": "boolean"
                  },
                  "checkInterval": {
                    "description": "The interval between regular checks",
                    "example": "3h;24h;30m",
                    "format": "go-duration",
                    "type": "string"
                  },
                  "fleetlockGroup": {
                    "description": "The group to use for fleetlock",
                    "example": "control-plane;compute",
                    "type": "string"
                  },
                  "fleetlockUrl": {
                    "description": "URL for the fleetlock server. Is required to be set globally.",
                    "example": "https://fleetlock.example.com",
                    "type": "string"
                  },
                  "kubeadmPath": {
                    "description": "The path to the kubeadm binary on the node. Upgraded will download kubeadm if no path is provided.",
                    "example": "/usr/bin/kubeadm",
                    "type": "string"
                  },
                  "kubeletConfig": {
                    "description": "The path to the kubelet config file on the node",
                    "example": "/etc/kubernetes/kubelet.conf",
                    "type": "string"
                  },
                  "logLevel": {
                    "description": "The log level used by slog, default \"info\"",
                    "enum": [
                      "debug",
                      "info",
                      "warn",
                      "error"
                    ],
                    "example": "debug;info;warn;error",
                    "type": "string"
                  },
                  "retryInterval": {
                    "description": "The interval between retries when an operation fails",
                    "example": "5m;1m;30s",
                    "format": "go-duration",
                    "type": "string"
                  },
                  "stream": {
                    "description": "The container image repository for os rebases",
                    "example": "ghcr.io/heathcliff26/fcos-k8s",
                    "type": "string"
                  }
                },
                "type": "object",
                "additionalProperties": false
              }
            },
            "required": [
              "labels"
            ],
            "type": "object",
            "additionalProperties": false
          },
          "description": "The different groups in which the nodes will be upgraded.\nAt minimum needs to separate control-plane from compute nodes, to ensure that control-plane nodes will be upgraded first.",
          "minProperties": 1,
          "type": "object"
        },
        "kubernetesVersion": {
          "description": "The kubernetes version the cluster should be at.\nIf the actual version differs, the cluster will be upgraded.",
          "example": "v1.31.0",
          "type": "string"
        },
        "upgraded": {
          "description": "The configuration for all upgraded daemons. Can be overwritten by group specific config.",
          "properties": {
            "allowUnsignedOstreeImages": {
              "description": "Allow unsigned ostree images for rebase. It is recommended to use signed images instead.",
              "type": "boolean"
            },
            "checkInterval": {
              "description": "The interval between regular checks",
              "example": "3h;24h;30m",
              "format": "go-duration",
              "type": "string"
            },
            "fleetlockGroup": {
              "description": "The group to use for fleetlock",
              "example": "control-plane;compute",
              "type": "string"
            },
            "fleetlockUrl": {
              "description": "URL for the fleetlock server. Is required to be set globally.",
              "example": "https://fleetlock.example.com",
              "type": "string"
            },
            "kubeadmPath": {
              "description": "The path to the kubeadm binary on the node. Upgraded will download kubeadm if no path is provided.",
              "example": "/usr/bin/kubeadm",
              "type": "string"
            },
            "kubeletConfig": {
              "description": "The path to the kubelet config file on the node",
              "example": "/etc/kubernetes/kubelet.conf",
              "type": "string"
            },
            "logLevel": {
              "description": "The log level used by slog, default \"info\"",
              "enum": [
                "debug",
                "info",
                "warn",
                "error"
              ],
              "example": "debug;info;warn;error",
              "type": "string"
            },
            "retryInterval": {
              "description": "The interval between retries when an operation fails",
              "example": "5m;1m;30s",
              "format": "go-duration",
              "type": "string"
            },
            "stream": {
              "description": "The container image repository for os rebases",
              "example": "ghcr.io/heathcliff26/fcos-k8s",
              "type": "string"
            }
          },
          "type": "object",
          "additionalProperties": false
        }
      },
      "required": [
        "groups",
        "kubernetesVersion",
        "upgraded"
      ],
      "type": "object",
      "additionalProperties": false
    },
    "status": {
      "properties": {
        "groups": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "The current status of each group",
          "type": "object"
        },
        "summary": {
          "description": "A summary of the overall status of the cluster",
          "type": "string"
        }
      },
      "type": "object",
      "additionalProperties": false
    }
  },
  "required": [
    "spec"
  ],
  "type": "object"
}
