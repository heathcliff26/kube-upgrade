---
# yaml-language-server: $schema=https://raw.githubusercontent.com/heathcliff26/kube-upgrade/main/manifests/generated/kubeupgradeplan_v1alpha3.json
apiVersion: kubeupgrade.heathcliff.eu/v1alpha3
kind: KubeUpgradePlan
metadata:
  name: upgrade-plan
spec:
  kubernetesVersion: ${kube_version_latest}
  upgraded:
    fleetlockUrl: http://fleetlock.kube-upgrade.svc.cluster.local
  groups:
    control-plane:
      labels:
        node-role.kubernetes.io/control-plane: "true"
      tolerations:
        - key: "node-role.kubernetes.io/control-plane"
          operator: "Exists"
          effect: "NoSchedule"
      upgraded:
        fleetlockGroup: control-plane
    compute:
      dependsOn:
        - control-plane
      labels:
        node-role.kubernetes.io/compute: "true"
      upgraded:
        fleetlockGroup: compute
